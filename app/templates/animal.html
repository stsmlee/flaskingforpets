{%extends 'base.html'%}

<title>{%block title%}Flasking for {{type}}s{% endblock %}</title>

{%block content%}

<!-- {% if form.is_submitted() and form.errors|count > 0 %} -->
<!-- <div class="alert alert-danger alert-dismissible fade show" role="alert">
    {{ form.errors|count }} error(s):
    <ul>
        {% for field_name, field_errors in form.errors|dictsort if field_errors %}
        {% for error in field_errors %}
            <li>{{ form[field_name].label }}: {{ error }}</li>
        {% endfor %}
    {% endfor %}
    </ul>
    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close" data-close></button>
</div> -->
<!-- {% endif %} -->


<h1>So you want {{type | lower}}s!</h1>

<h3>Pick out some filters if you like!</h3>
<form method="POST" onsubmit="wait()" id = "filter_form">
    {{ form.hidden_tag() }}
    <div>{{ form.breed1.label }} {{ form.breed1()}}</div>
    <div>{{ form.breed2.label }} {{ form.breed2()}}</div>
    <div>{{ form.color.label }} {{ form.color()}}</div>
    <div>{{ form.coat.label }} {{ form.coat()}}</div>
    <div>{{ form.gender.label }} {{ form.gender()}}</div>
    <b>Care to filter by size?</b>
    <div>{{ form.small() }} {{ form.small.label }} {{ form.medium() }} {{ form.medium.label }} {{ form.large() }} {{ form.large.label }} {{ form.xlarge() }} {{ form.xlarge.label }}</div>
    <b>Care to filter by age?</b>
    <div>{{ form.baby() }} {{form.baby.label}} {{ form.young() }} {{form.young.label}} {{ form.adult() }} {{form.adult.label}} {{ form.senior() }} {{form.senior.label}} </div>
    <b>Care to filter by your home needs?</b>
    <div>{{ form.children() }} {{ form.children.label }} {{ form.cats() }} {{ form.cats.label }} {{ form.dogs() }} {{ form.dogs.label }} 
        {% if type == 'Dog' %}
        {{form.housetrained()}} {{form.housetrained.label}}
        {% endif %}
    </div>
    <b>Where are you?</b>
    <div>{{ form.zipcode.label }} {{ form.zipcode() }} {{ form.distance.label }} {{ form.distance() }}</div>
    {% if login %}
    <div>If you want to save your search for future use, enter a name: {{ form.savename() }}</div>
    {% endif %}
    <div id = "form_submit"> 
        <div>{{ form.submit() }}</div>
        <div id="wait" style="display: none;">
        <!-- <div id="wait"> -->
            <div><img src="{{ url_for('static', filename = 'meow.gif') }}"></div>
            <div id = "msg">Please wait while we take a look!</div>
            <div><img src="{{ url_for('static', filename = 'meow.gif') }}"></div>
        </div>
    </div>
  </form>

{% if type == 'Dog' %}
<div class = 'sticker'>
    <img src = "{{ url_for('static', filename = 'kimchibun.png') }}" alt = "the cutest pitbull ever, Kimchi Bun" style = "width:auto;height:218px;">
</div>
{% endif %}


{% if type == 'Cat' %}
<div class = 'sticker'>
    <img src = "{{ url_for('static', filename = 'sieg.png') }}" alt = "the softest cat ever, Siegfried" style = "width:auto;height:218px;">
</div>
{% endif %}

<script>
    function wait() {
        let popup = document.getElementById('wait');
        if (popup.style.display === "none") {
          popup.style.display = "flex";
        } 
        else {
          popup.style.display = "none";
        }
    }
</script>



<!-- {% if form.is_submitted() and form.savename.errors|count > 0 %}
<div class="alert" data-closable>
    <p style="text-align:center"><br/>
        {% for error in form.savename.errors %}
        {{form.savename.label}}: {{error}}
        {% endfor %}
    </p>
    <button class="close-button" aria-label="Dismiss alert" type="button" data-close>
      <span aria-hidden="true">&times;</span>
    </button> -->
   <!-- </div> -->
<!-- {% endif %}  --> 


{%endblock%} 